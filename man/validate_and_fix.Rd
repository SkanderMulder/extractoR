% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/validate.R
\name{validate_and_fix}
\alias{validate_and_fix}
\title{Validate and Fix LLM JSON Response}
\usage{
validate_and_fix(
  initial_response,
  json_schema_str,
  text,
  model,
  strategy,
  max_retries,
  .progress = TRUE
)
}
\arguments{
\item{initial_response}{The initial JSON string response from the LLM.}

\item{json_schema_str}{The JSON schema as a string.}

\item{text}{The original input text that was sent to the LLM.}

\item{model}{The LLM model being used.}

\item{strategy}{The self-correction strategy ("reflect", "direct", "polite").}

\item{max_retries}{The maximum number of retry attempts.}

\item{.progress}{Logical, whether to show progress feedback using \code{cli}.}
}
\value{
A list representing the valid JSON response, or an error if validation
fails after \code{max_retries}.
}
\description{
Internal function to validate an LLM's JSON response against a JSON schema
and, if invalid, generate feedback for the LLM to self-correct.
}
\keyword{internal}
